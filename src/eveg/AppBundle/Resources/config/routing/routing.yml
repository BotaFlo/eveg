# src/eveg/AppBundle/Resources/config/routing/routing.yml

# application routes

eveg_app:
    path: /
    defaults:
        _controller: FrameworkBundle:Redirect:redirect
        route: eveg_app_homepage

eveg_app_homepage:
    locales:  { fr: "/accueil", en: "/en/homepage" }
    defaults: { _controller: evegAppBundle:Default:index }

eveg_app_howto:
    locales:  { fr: "/utiliser", en: "/en/howto" }
    defaults: { _controller: evegAppBundle:Default:howto }

eveg_app_contact:
    locales:  { fr: "/contact", en: "/en/contact" }
    defaults: { _controller: evegAppBundle:Default:contact }

# We use this trick because BeSimpleI18nRoutingBundle seems to be incompatible with FOSJsRoutingBundle (I think it doesn't recognize the "locales" parameter)
eveg_show_one_redirect:
    path: /app/redirect/{id}
    defaults:
        _controller: FrameworkBundle:Redirect:redirect
        route: eveg_show_one

eveg_show_one:
    locales:  { fr: "/app/{id}", en: "/en/app/{id}" }
    defaults: { _controller: evegAppBundle:Default:showOne }
    requirements:
        id: \d+

eveg_language:
    path: /language/{lang}
    defaults: { _controller: evegAppBundle:Default:setLanguage }
    requirements:
        lang: fr|en

eveg_depFr_filter:
    path: /app/dep-fr-filter
    defaults: { _controller : evegAppBundle:RepartitionFilter:depFrFilter }
    requirements:
        _method: POST

# API Search
api_get_syntaxon_search:
    path: /api/syntaxons/search.{format}
    defaults: { _controller: evegAppBundle:SyntaxonSearch:simpleSearch, format: json }
    requirements:
        format:  json|xml
        _method: GET

# Admin routes
eveg_admin :
  resource: "routing_admin.yml"
  prefix:  /adminOld

eveg_app_admin_syntaxon:
    resource: "@evegAppBundle/Resources/config/routing/syntaxoncore.yml"
    prefix:   /admin/syntaxon